"use strict";(self.webpackChunkjs_explore=self.webpackChunkjs_explore||[]).push([[551],{6551:function(e,n,t){t.r(n),t.d(n,{default:function(){return i}});var r=t(9439),u=t(2791),c=t(3433),o=t(4569),a=t.n(o);var s=t(184);function i(){var e=(0,u.useState)(""),n=(0,r.Z)(e,2),t=n[0],o=n[1],i=(0,u.useState)(1),f=(0,r.Z)(i,2),l=f[0],d=f[1],h=function(e,n){var t=(0,u.useState)(!0),o=(0,r.Z)(t,2),s=o[0],i=o[1],f=(0,u.useState)(!1),l=(0,r.Z)(f,2),d=l[0],h=l[1],p=(0,u.useState)([]),v=(0,r.Z)(p,2),g=v[0],j=v[1],k=(0,u.useState)(!1),x=(0,r.Z)(k,2),Z=x[0],b=x[1];return(0,u.useEffect)((function(){j([])}),[e]),(0,u.useEffect)((function(){var t;return i(!0),h(!1),a()({method:"GET",url:"http://openlibrary.org/search.json",params:{q:e,page:n},cancelToken:new(a().CancelToken)((function(e){return t=e}))}).then((function(e){j((function(n){return(0,c.Z)(new Set([].concat((0,c.Z)(n),(0,c.Z)(e.data.docs.map((function(e){return e.title}))))))})),b(e.data.docs.length>0),i(!1)})).catch((function(e){a().isCancel(e)||h(!0)})),function(){return t()}}),[e,n]),{loading:s,error:d,books:g,hasMore:Z}}(t,l),p=h.books,v=h.hasMore,g=h.loading,j=h.error,k=(0,u.useRef)(),x=(0,u.useCallback)((function(e){g||(k.current&&k.current.disconnect(),k.current=new IntersectionObserver((function(e){e[0].isIntersecting&&v&&d((function(e){return e+1}))})),e&&k.current.observe(e))}),[g,v]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("input",{type:"text",value:t,onChange:function(e){o(e.target.value),d(1)}}),p.map((function(e,n){return p.length===n+1?(0,s.jsx)("div",{ref:x,children:e},e):(0,s.jsx)("div",{children:e},e)})),(0,s.jsx)("div",{children:g&&"Loading..."}),(0,s.jsx)("div",{children:j&&"Error"})]})}}}]);
//# sourceMappingURL=551.7667a42c.chunk.js.map